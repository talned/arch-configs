#!/usr/bin/env bash

# Display cycling script for Sway with Kanshi

CONFIG_FILE="$HOME/.config/sway/display-state"
mkdir -p "$(dirname "$CONFIG_FILE")"

# Initialize state if not exists
if [ ! -f "$CONFIG_FILE" ]; then
    echo "0" > "$CONFIG_FILE"
fi

STATE=$(cat "$CONFIG_FILE")

case $STATE in
    0)
	# Laptop Only
        kanshictl switch "Laptop Only"
        echo "1" > "$CONFIG_FILE"
        ;;
    1)
 	# Both Displays
        kanshictl switch "Both Displays"
        echo "2" > "$CONFIG_FILE"
        ;;
    2)
        # External Only
        kanshictl switch "External Only"
        echo "0" > "$CONFIG_FILE"
        ;;
esac
